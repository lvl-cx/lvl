local cfg = {}
cfg.list = {
  [1] = { offset = -1.2, mystatus = false, hash = 1557126584, x = 449.69815063477, y = -986.46911621094, z = 30.689594268799, locked = true, permission="police.menu", name = "LSPD"},
  [2] = { offset = -1.2, mystatus = false, hash = 749848321, x = 452.61877441406, y = -982.7021484375, z = 30.689598083496, locked = true, permission="police.menu", name = "LSPD"},
  [3] = { offset = -1.2, mystatus = false, hash = -519068795, x = 434.59130859375, y = -981.83941650391, z = 30.712020874023, locked = true, key = "key_lspd", permission="police.menu", name = "LSPD"},
  [4] = { offset = -1.2, mystatus = false, hash = 185711165, x = 443.97, y = -989.033, z = 30.6896, locked = true, permission="police.menu", name = "LSPD", pair = 5},
  [5] = { offset = -1.2, mystatus = false, hash = 185711165, x = 445.37, y = -989.705, z = 30.6896, locked = true, permission="police.menu", name = "LSPD", pair = 4},
  [6] = { offset = -1.2, mystatus = false, hash = 631614199, x = 464.4, y = -992.265, z = 24.9149, locked = true, permission="police.menu", name = "LSPD", swarka = true},
  [7] = { offset = -1.2, mystatus = false, hash = 631614199, x = 462.381, y = -993.651, z = 24.9149, locked = true, permission="police.menu", name = "LSPD", swarka = true},
  [8] = { offset = -1.2, mystatus = false, hash = 631614199, x = 462.331, y = -998.152, z = 24.9149, locked = true, permission="police.menu", name = "LSPD", swarka = true},
  [9] = { offset = -1.2, mystatus = false, hash = 631614199, x = 462.704, y = -1001.92, z = 24.9149, locked = true, permission="police.menu", name = "LSPD", swarka = true, pair = 21},
  [10] = { offset = 1.2, mystatus = false, hash = -1033001619, x = 464.126, y = -1002.78, z = 24.9149, locked = true, permission="police.menu", name = "LSPD", pair = 11},
  [12] = { offset = -1.2, mystatus = false, hash = -340230128, x = 465.467, y = -983.446, z = 43.6918, locked = true, permission="police.menu", name = "LSPD", pair = 13},
  [13] = { offset = -1.2, mystatus = false, hash = -340230128, x = 462.979, y = -984.163, z = 43.6919, locked = true, permission="police.menu", name = "LSPD", pair = 12},
  -- [14] = { offset = -1.2, mystatus = false, hash = 320433149, x = 434.7479, y = -982.2151, z = 30.83926, locked = false, permission="police.menu", name = "LSPD", pair = 15},
  -- [15] = { offset = 1.2, mystatus = false, hash = -1215222675, x = 434.7479, y = -981.6184, z = 30.83926, locked = false, permission="police.menu", name = "LSPD", pair = 14},
  [17] = { offset = -1.2, mystatus = false, hash = -131296141, x = 443.0298, y = -992.941, z = 30.8393, locked = true, permission="police.menu", name = "LSPD", pair = 16},
  [16] = { offset = -1.2, mystatus = false, hash = -131296141, x = 443.0298, y = -993.5412, z = 30.8393, locked = true, permission="police.menu", name = "LSPD", pair = 17},
  [19] = { offset = 1.2, mystatus = false, hash = -2023754432, x = 468.9679, y = -1014.452, z = 26.53623, locked = true, permission="police.menu", name = "LSPD", pair = 18},
  [18] = { offset = 1.2, mystatus = false, hash = -2023754432, x = 468.3716, y = -1014.452, z = 26.53623, locked = true, permission="police.menu", name = "LSPD", pair = 19},
  [21] = { offset = -1.2, mystatus = false, hash = 749848321, x = 461.2865, y = -985.3206, z = 30.83926, locked = true, permission="police.menu", name = "LSPD", pair = 9},
  [20] = { offset = 1.2, mystatus = false, hash = -2023754432, x = 452.6248, y = -987.3626, z = 30.83926, locked = true, permission="police.menu", name = "LSPD"},
  [22] = { offset = -1.2, mystatus = false, hash = -1033001619, x = 480.780, y = -1003.553, z = 24.914, locked = true, permission="police.menu", name = "LSPD"},
  [23] = { offset = -1.2, mystatus = false, hash = -1033001619, x = 476.274, y = -1003.413, z = 24.914, locked = true, permission="police.menu", name = "LSPD"},
  [24] = { offset = -1.2, mystatus = false, hash = -1033001619, x = 472.12228393555, y = -1003.4991455078, z = 24.914724349976, locked = true, permission="police.menu", name = "LSPD"},
  [25] = { offset = -1.2, mystatus = false, hash = -1033001619, x = 467.74185180664, y = -1003.4877929688, z = 24.914726257324, locked = true, permission="police.menu", name = "LSPD"},
  [26] = { offset = -1.2, mystatus = false, hash = -1033001619, x = 467.94079589844, y = -996.41326904297, z = 24.914720535278, locked = true, permission="police.menu", name = "LSPD"},
  [27] = { offset = -1.2, mystatus = false, hash = -1033001619, x = 472.22473144531, y = -996.44067382813, z = 24.914720535278, locked = true, permission="police.menu", name = "LSPD"},
  [28] = { offset = -1.2, mystatus = false, hash = -1033001619, x = 476.49130249023, y = -996.51629638672, z = 24.914720535278, locked = true, permission="police.menu", name = "LSPD"},
  [29] = { offset = -1.2, mystatus = false, hash = -1033001619, x = 480.77062988281, y = -996.51708984375, z = 24.914722442627, locked = true, permission="police.menu", name = "LSPD"},
  [30] = { offset = -1.2, mystatus = false, hash = -543497392, x = 465.45608520508, y = -989.33911132813, z = 24.914726257324, locked = true, permission="police.menu", name = "LSPD", pair = 31},
  [31] = { offset = -1.2, mystatus = false, hash = -543497392, x = 465.54251098633, y = -990.62298583984, z = 24.914720535278, locked = true, permission="police.menu", name = "LSPD", pair = 30},
  [32] = { offset = -1.2, mystatus = false, hash = -1033001619, x = 446.64767456055, y = -999.12579345703, z = 30.723829269409, locked = true, permission="police.menu", name = "LSPD", pair = 33},
  [33] = { offset = -1.2, mystatus = false, hash = -1033001619, x = 445.52090454102, y = -999.16558837891, z = 30.724052429199, locked = true, permission="police.menu", name = "LSPD", pair = 32},
  [34] = { offset = -1.2, mystatus = false, hash = -131296141, x = 463.8137512207, y = -984.07409667969, z = 35.931064605713, locked = true, permission="police.menu", name = "LSPD", pair = 32},
  [35] = { offset = -1.2, mystatus = false, hash = 227019171, x = 423.7, y = -993.8, z = 30.7, locked = true, permission="police.menu", name = "LSPD"},
}

local Tunnel = module("lvl", "lib/Tunnel")
local Proxy = module("lvl", "lib/Proxy")
LVL = Proxy.getInterface("LVL")
LVLclient = Tunnel.getInterface("LVL", "ORP_doors")

--local cfg = module("doors", "config")

AddEventHandler("LVL:playerSpawn",function(user_id,source,first_spawn)
  if first_spawn then
    TriggerClientEvent('lvldoorsystem:load', source, cfg.list)
  end
end)

Citizen.CreateThread(function()
  Citizen.Wait(500)
  TriggerClientEvent('lvldoorsystem:load', -1, cfg.list)
end)


RegisterServerEvent('lvldoorsystem:open')
AddEventHandler('lvldoorsystem:open', function(id)
  local user_id = LVL.getUserId({source})
  local player = LVL.getUserSource({user_id})
  if LVL.hasPermission({user_id, "police.menu"}) then
   
    SetTimeout(1, function()
      cfg.list[id].locked = not cfg.list[id].locked
      TriggerClientEvent('lvldoorsystem:statusSend', (-1), id,cfg.list[id].locked)
      if cfg.list[id].pair ~= nil then
        local idsecond = cfg.list[id].pair
        cfg.list[idsecond].locked = cfg.list[id].locked
        TriggerClientEvent('lvldoorsystem:statusSend', (-1), idsecond,cfg.list[id].locked)
      end
      if cfg.list[id].locked then
        LVLclient.notify(player, {"You locked the door"})
      else
        LVLclient.notify(player, {"You unlocked the door"})
      end
    end)
  else
    LVLclient.notify(player, {"You're not a fed on duty"})
  end
end)
